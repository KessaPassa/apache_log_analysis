# apache_log_analysis
## What is this
apacheのログファイルを読み取り、形式にまとめてコンソールに情報を表示させるツールです

## How to use
`python analyse.py [option] [term] [dir_name or file_name]`  

### option
表示したい情報を決めます  
- `-h`１時間毎のアクセス数を表示します
- `-r` アクセスの多いホスト順に一覧表示します
- `--help` コマンドの操作方法を表示します
  
### term
読み取るログファイルの期間を選択します  
例: `2019/12/15` or `2019/12/01-2019/12/31` 

### dir_name or file_name
どのディレクトリのどのログファイルを読み取るか指定します  
例: `../Users/LOGS/apache_log.log`  
指定しない場合は初期設定 `./logs/*log`となり，拡張子がlogのファイル全てを読み込みます  

## .envファイルについて
上述のコマンド入力でディレクトリを指定できる他に`.env`ファイルをいじることで設定が可能です  
- `dir_path` ディレクトリの場所を指定します
- `extention` ファイルの拡張子を指定します．指定した拡張子全てのファイルを読み込みたい場合は先頭に`*`をつけてください  
- `chunksize` ファイルを一度にどれだけ読み込むか指定します．初期設定は`100000`．数値が高い程ファイル読み込みの速度が上がりますがその分メモリが要求されます．複数ファイルで合計10Gの時chunksizeをデフォルトの`100000`で実行するとメモリ800MB，実行時間は約1分となります(memory-profiler v0.55.0にて検証済)



